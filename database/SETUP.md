# Настройка базы данных

## Шаг 1: Создание базы данных

1. Откройте браузер и перейдите: `http://localhost/phpmyadmin`
2. Перейдите на вкладку **"SQL"**
3. Выполните команду:

```sql
CREATE DATABASE heritage_routes CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

## Шаг 2: Применение схемы

### Вариант А: Через phpMyAdmin (РЕКОМЕНДУЕТСЯ)

#### Если возникают ошибки с синтаксисом:

Используйте файл `schema_step_by_step.sql` - выполняйте каждый блок по очереди:

1. В phpMyAdmin выберите базу данных `heritage_routes` в левом меню
2. Перейдите на вкладку **"SQL"**
3. Откройте файл `schema_step_by_step.sql`
4. Скопируйте **ШАГ 1** (DROP TABLE...)
5. Вставьте и нажмите **"Вперёд"** (Go)
6. Повторите для **ШАГ 2, 3, 4...** и так далее

#### Если ошибок нет:

1. В phpMyAdmin выберите базу данных `heritage_routes` в левом меню
2. Перейдите на вкладку **"SQL"**
3. Скопируйте содержимое файла `schema.sql`
4. Вставьте в поле SQL запроса
5. Нажмите кнопку **"Вперёд"** (Go)

### Вариант Б: Через командную строку

```bash
mysql -u root heritage_routes < schema.sql
```

(если пароль установлен, добавьте `-p`)

## Проверка

После применения схемы должны быть созданы таблицы:
- `heritage_objects` - объекты культурного наследия (с SPATIAL индексом)
- `users` - пользователи
- `routes` - маршруты
- `route_objects` - связь маршрутов и объектов
- `object_stories` - кэш рассказов об объектах (ИИ-экскурсовод)

Проверить можно командой:

```sql
SHOW TABLES;
```

Должно показать все 5 таблиц.

## Следующий шаг

После создания схемы запустите скрипт импорта данных:

```bash
cd database
python import_data.py
```

